<div ng-controller="Phoenix.Tree.EditController">
    <h1>{{converter.name}} Converter</h1>

    <section>
        <h3>1. Select the source datatype to convert from:</h3>
        <div>
            <select id="datatype" ng-disabled="hasTested || isTesting" ng-model="sourceDataTypeId" ng-options="datatype.id as datatype.name for datatype in availableSourceDataTypes"></select>
        </div>
    </section>

    <section ng-hide="!(sourceDataTypeId)">
        <h3>2. Select the target datatype to convert to:</h3>
        <div>
            <select id="Select1" ng-disabled="hasTested || isTesting" ng-model="targetDataTypeId" ng-options="datatype.id as datatype.name for datatype in availableTargetDataTypes"></select>
        </div>
    </section>

    <section ng-hide="!(sourceDataTypeId) || !(targetDataTypeId)">
        <h3>3. Test the saved data for compatibility with this converter:</h3>
        <div>
            <input type="button" value="Test" ng-click="test()" ng-hide="isTesting || hasTested"/>
        </div>
        <p>{{testResults.resultMessage}}</p>
        <table>
            <tr>
                <td>-</td>
                <td>Content Name</td>
                <td>Content Id</td>
                <td>Property Alias</td>
                <td>Old Value</td>
                <td>New Value</td>
            </tr>
            <tr ng-repeat="propertyResult in testResults.propertyResults">
                <td>{{$index + 1}}</td>
                <td>{{propertyResult.ContentName}}</td>
                <td>{{propertyResult.ContentId}}</td>
                <td>{{propertyResult.PropertyAlias}}</td>
                <td>{{propertyResult.PropertyValue}}</td>
                <td>{{propertyResult.NewValue}}</td>
            </tr>
        </table>

    </section>

    <section ng-show="hasTested && testResults.isCompatible === true">
        <h3>4. Convert the data:</h3>
        <p>WARNING!  Please make sure you have backed-up your database as this action cannot be undone.  Depending on how much data needs to be processed, this may take several minutes to complete.</p>
        <div>
            <label>
                <input type="checkbox" ng-model="knowsRisk" /> Please check the box to acknowledge this risk.
            </label>
            <input ng-disabled="!knowsRisk" type="button" value="Convert"/>
        </div>
    </section>
</div>